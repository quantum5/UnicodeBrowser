{% extends "base.xhtml" %}

{% block title %}Search{% endblock %}

{% load unicode %}
{% load static from staticfiles %}

{% block head %}
    <style type="text/css">
    .charview {
        font-size: 300%;
        text-align: center;
    }

    {% for font in fonts %}
        @font-face {
            font-family: '{{ font.name }}';
            src: local('{{ font.name }}'), url('{% static font.file %}');
        }
    {% endfor %}
    </style>
{% endblock %}

{% block body %}
    <form action="">
        <label for="text">Search:</label>
        <input type="text" name="q" id="text" value="{{ query|escape }}"></input>
        <input type="submit" value="Search"></input>
    </form>

  {% if codepoints %}
    <hr/>

    <table class="codepoints" border="1">
        <thead><tr>
            <td>Char</td>
            <td>Description</td>
            <td>Block</td>
        </tr></thead>
        <tbody>
            {% for point in codepoints %}
                <tr>
                    {% if point.block.font %}
                    <td class="charview" style="font-family: {{ point.block.font.name }}, sans-serif">{{ point.id|to_entity }}</td>
                    {% else %}
                    <td class="charview">{{ point.id|to_entity }}</td>
                    {% endif %}
                    <td>{{ point.description|escape|to_br }}</td>
                    <td>{{ point.block.fullname|escape }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    {% if query %}
        <div class="pagination">
            <span class="step-links">
                {% if codepoints.has_previous %}
                    <a href="?q={{ query|escape }}&amp;page={{ codepoints.previous_page_number }}">previous</a>
                {% endif %}

                <span class="current">
                    Page {{ codepoints.number }} of {{ codepoints.paginator.num_pages }}.
                </span>

                {% if codepoints.has_next %}
                    <a href="?q={{ query|escape }}&amp;page={{ codepoints.next_page_number }}">next</a>
                {% endif %}
            </span>
        </div>
    {% endif %}
  {% endif %}
{% endblock %}
